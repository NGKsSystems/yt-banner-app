<script>
  const canvas = document.getElementById('bannerCanvas');
  const ctx = canvas.getContext('2d');
  const imageInput = document.getElementById('imageInput');
  const exportBtn = document.getElementById('exportBtn');

  let images = [];

  imageInput.addEventListener('change', function () {
    const files = Array.from(this.files);
    images = [];

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    let loadedCount = 0;

    files.forEach((file, index) => {
      const img = new Image();
      img.onload = () => {
        images[index] = img;
        loadedCount++;
        if (loadedCount === files.length) {
          drawAll();
        }
      };
      img.src = URL.createObjectURL(file);
    });
  });

  function drawAll() {
    // Background
    if (images[0]) ctx.drawImage(images[0], 0, 0, canvas.width, canvas.height);

    // Mobile overlay
    if (images[1]) ctx.drawImage(images[1], 740, 620, 1080, 200);

    // Header banner
    if (images[2]) ctx.drawImage(images[2], 0, 0, 2560, 300);

    drawOverlays();
  }

  function drawOverlays() {
    ctx.strokeStyle = 'lime';
    ctx.lineWidth = 4;
    ctx.strokeRect(740, 620, 1080, 200); // Mobile safe

    ctx.strokeStyle = 'yellow';
    ctx.lineWidth = 2;
    ctx.strokeRect(0, 0, canvas.width, canvas.height); // Full canvas guide
  }

  exportBtn.addEventListener('click', () => {
    const link = document.createElement('a');
    link.download = 'yt_banner_final.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  });
</script>
